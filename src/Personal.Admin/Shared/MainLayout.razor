@inherits LayoutComponentBase
@inject IJSRuntime JS

<MudThemeProvider Theme="TemaAtual" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <AuthorizeView>
        <Authorized>
            <MudAppBar Elevation=1 Dense=true>
                <MudIconButton Icon=@Icons.Material.Filled.Menu Color=Color.Inherit Edge=Edge.Start OnClick="@((e) => DrawerToggle())" />
                <MudText Typo="Typo.body1" Class="ml-3">Painel Administrativo - Personal Trainer</MudText>
                <LoginDisplayComponent />
                <MudSpacer />
                <MudMenu Icon="@Icons.Material.Rounded.Email" Color="Color.Inherit" Dense="true" Direction="Direction.Bottom">
                    <MudMenuItem>Meu Perfil</MudMenuItem>
                    <MudMenuItem>Sair</MudMenuItem>
                </MudMenu>
                <MudMenu Icon="@Icons.Material.Rounded.MoreVert" Color="Color.Inherit" Dense="true" Direction="Direction.Bottom">
                    <MudMenuItem>Meu Perfil</MudMenuItem>
                    <MudMenuItem>Sair</MudMenuItem>
                </MudMenu>
            </MudAppBar>
            <MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="3" Style="background-color: #F9F9F9;">
                <MenuAdministrador />
            </MudDrawer>
            <MudMainContent>
                <MudContainer Class="pt-4 bg-light">
                    @Body
                </MudContainer>
            </MudMainContent>
        </Authorized>

        <NotAuthorized>
            <MudAppBar Elevation=1 Dense=true>
                <MudText Typo="Typo.body1" Class="ml-3">Painel Administrativo - Personal Trainer</MudText>
                <MudSpacer />
                <LoginDisplayComponent />
            </MudAppBar>
            <MudMainContent>
                <MudContainer Class="pt-4 bg-light">
                    @Body
                </MudContainer>
            </MudMainContent>
        </NotAuthorized>

    </AuthorizeView>
</MudLayout>

@code {
    bool _drawerOpen = true;

    void DrawerToggle() =>
        _drawerOpen = !_drawerOpen;

    protected override void OnInitialized() =>
        TemaAtual = defaultTheme;

    #region Theme

    MudTheme TemaAtual = new MudTheme();

    MudTheme defaultTheme = new MudTheme()
        {
            Palette = new Palette()
            {
                AppbarBackground = "#222326",
                AppbarText = "#F2F2F2",

                Primary = "#83A603"
            }
        };
    #endregion

}